{"version":3,"sources":["pager.jsx"],"names":["BASE_SHIFT","TITLE_SHIFT","TITLES","first","prev","prevSet","nextSet","next","last","Pager","createClass","propTypes","current","PropTypes","number","isRequired","total","visiblePages","titles","object","onPageChanged","func","onPageSizeChanged","getTitles","key","props","calcBlocks","blockSize","blocks","Math","ceil","currBlock","size","isPrevDisabled","isNextDisabled","isPrevMoreHidden","isNextMoreHidden","visibleRange","start","delta","end","handleFirstPage","handlePageChanged","handlePreviousPage","handleNextPage","handleLastPage","handleMorePrevPages","handleMoreNextPages","el","handler","renderPages","pair","range","map","idx","onClick","bind","isActive","render","Page","isHidden","baseCss","className","css","isDisabled","index","children","res","i","push"],"mappings":"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","file":"pager.js","sourcesContent":["/**\n * # Stateless Pager component\n *\n * ## Usage\n * ```\n * <Pager current={3}\n *        total={20}\n *        visiblePages={5}\n *        onPageChanged={this.handlePageChanged}\n *        titles={{\n *            first:   \"First\",\n *            prev:    \"Prev\",\n *            prevSet: \"<<<\",\n *            nextSet: \">>>\",\n *            next:    \"Next\",\n *            last:    \"Last\"\n *        }} />\n * ```\n *\n * ## How it looks like\n * ```\n * First | Prev | ... | 6 | 7 | 8 | 9 | ... | Next | Last\n * ```\n *\n */\n\nimport React from 'react';\n\n\n/**\n * ## Constants\n */\nconst BASE_SHIFT = 0;\nconst TITLE_SHIFT = 1;\n\nconst TITLES = {\n\tfirst:   'First',\n\tprev:    '\\u00AB',\n\tprevSet: '...',\n\tnextSet: '...',\n\tnext:    '\\u00BB',\n\tlast:    'Last',\n};\n\n\n/**\n * ## Constructor\n */\nconst Pager = React.createClass({\n\tpropTypes: {\n\t\tcurrent:               React.PropTypes.number.isRequired,\n\t\ttotal:                 React.PropTypes.number.isRequired,\n\t\tvisiblePages:          React.PropTypes.number.isRequired,\n\t\ttitles:                React.PropTypes.object,\n\n\t\tonPageChanged:         React.PropTypes.func,\n\t\tonPageSizeChanged:     React.PropTypes.func,\n\t},\n\n    /* ========================= HELPERS ==============================*/\n\tgetTitles(key) {\n\t\treturn (this.props.titles || TITLES)[key];\n\t},\n\n    /**\n     * Calculates \"blocks\" of buttons with page numbers.\n     */\n\tcalcBlocks() {\n\t\tconst props = this.props;\n\t\tconst total = props.total;\n\t\tconst blockSize = props.visiblePages;\n\t\tconst current = props.current + TITLE_SHIFT;\n\t\tconst blocks = Math.ceil(total / blockSize);\n\t\tconst currBlock = Math.ceil(current / blockSize) - TITLE_SHIFT;\n\n\t\treturn {\n\t\t\ttotal:    blocks,\n\t\t\tcurrent:  currBlock,\n\t\t\tsize:     blockSize,\n\t\t};\n\t},\n\n\tisPrevDisabled() {\n\t\treturn this.props.current <= BASE_SHIFT;\n\t},\n\n\tisNextDisabled() {\n\t\treturn this.props.current >= (this.props.total - TITLE_SHIFT);\n\t},\n\n\tisPrevMoreHidden() {\n\t\tconst blocks = this.calcBlocks();\n\t\treturn (blocks.total === TITLE_SHIFT) || (blocks.current === BASE_SHIFT);\n\t},\n\n\tisNextMoreHidden() {\n\t\tconst blocks = this.calcBlocks();\n\t\treturn (blocks.total === TITLE_SHIFT) || (blocks.current === (blocks.total - TITLE_SHIFT));\n\t},\n\n\tvisibleRange() {\n\t\tconst blocks = this.calcBlocks();\n\t\tconst start = blocks.current * blocks.size;\n\t\tconst delta = this.props.total - start;\n\t\tconst end = start + ((delta > blocks.size) ? blocks.size : delta);\n\n\t\treturn [start + TITLE_SHIFT, end + TITLE_SHIFT];\n\t},\n\n\n    /* ========================= HANDLERS =============================*/\n\thandleFirstPage() {\n\t\tif (!this.isPrevDisabled()) {\n\t\t\tthis.handlePageChanged(BASE_SHIFT);\n\t\t}\n\t},\n\n\thandlePreviousPage() {\n\t\tif (!this.isPrevDisabled()) {\n\t\t\tthis.handlePageChanged(this.props.current - TITLE_SHIFT);\n\t\t}\n\t},\n\n\thandleNextPage() {\n\t\tif (!this.isNextDisabled()) {\n\t\t\tthis.handlePageChanged(this.props.current + TITLE_SHIFT);\n\t\t}\n\t},\n\n\thandleLastPage() {\n\t\tif (!this.isNextDisabled()) {\n\t\t\tthis.handlePageChanged(this.props.total - TITLE_SHIFT);\n\t\t}\n\t},\n\n    /**\n     * Chooses page, that is one before min of currently visible\n     * pages.\n     */\n\thandleMorePrevPages() {\n\t\tconst blocks = this.calcBlocks();\n\t\tthis.handlePageChanged((blocks.current * blocks.size) - TITLE_SHIFT);\n\t},\n\n    /**\n     * Chooses page, that is one after max of currently visible\n     * pages.\n     */\n\thandleMoreNextPages() {\n\t\tconst blocks = this.calcBlocks();\n\t\tthis.handlePageChanged((blocks.current + TITLE_SHIFT) * blocks.size);\n\t},\n\n\thandlePageChanged(el) {\n\t\tconst handler = this.props.onPageChanged;\n\t\tif (handler) handler(el);\n\t},\n\n\n    /* ========================= RENDERS ==============================*/\n    /**\n     * ### renderPages()\n     * Renders block of pages' buttons with numbers.\n     * @param {Number[]} range - pair of [start, from], `from` - not inclusive.\n     * @return {React.Element[]} - array of React nodes.\n     */\n\trenderPages(pair) {\n\t\treturn range(pair[0], pair[1]).map((el, idx) => {\n\t\t\tconst current = el - TITLE_SHIFT;\n\t\t\tconst onClick = this.handlePageChanged.bind(null, current);\n\t\t\tconst isActive = (this.props.current === current);\n\n\t\t\treturn (\n\t\t\t\t<Page\n\t\t\t\t\tkey={idx}\n\t\t\t\t\tindex={idx} isActive={isActive}\n\t\t\t\t\tclassName=\"btn-numbered-page\"\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t>{el}</Page>\n\t\t\t);\n\t\t});\n\t},\n\n\n\trender() {\n\t\tconst titles = this.getTitles;\n\n\t\treturn (\n\t\t\t<nav>\n\t\t\t\t<ul className=\"pagination\">\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-first-page\"\n\t\t\t\t\t\tkey=\"btn-first-page\"\n\t\t\t\t\t\tisDisabled={this.isPrevDisabled()}\n\t\t\t\t\t\tonClick={this.handleFirstPage}\n\t\t\t\t\t>{titles('first')}</Page>\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-prev-page\"\n\t\t\t\t\t\tkey=\"btn-prev-page\"\n\t\t\t\t\t\tisDisabled={this.isPrevDisabled()}\n\t\t\t\t\t\tonClick={this.handlePreviousPage}\n\t\t\t\t\t>{titles('prev')}</Page>\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-prev-more\"\n\t\t\t\t\t\tkey=\"btn-prev-more\"\n\t\t\t\t\t\tisHidden={this.isPrevMoreHidden()}\n\t\t\t\t\t\tonClick={this.handleMorePrevPages}\n\t\t\t\t\t>{titles('prevSet')}</Page>\n\n\t\t\t\t\t{this.renderPages(this.visibleRange())}\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-next-more\"\n\t\t\t\t\t\tkey=\"btn-next-more\"\n\t\t\t\t\t\tisHidden={this.isNextMoreHidden()}\n\t\t\t\t\t\tonClick={this.handleMoreNextPages}\n\t\t\t\t\t>{titles('nextSet')}</Page>\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-next-page\"\n\t\t\t\t\t\tkey=\"btn-next-page\"\n\t\t\t\t\t\tisDisabled={this.isNextDisabled()}\n\t\t\t\t\t\tonClick={this.handleNextPage}\n\t\t\t\t\t>{titles('next')}</Page>\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-last-page\"\n\t\t\t\t\t\tkey=\"btn-last-page\"\n\t\t\t\t\t\tisDisabled={this.isNextDisabled()}\n\t\t\t\t\t\tonClick={this.handleLastPage}\n\t\t\t\t\t>{titles('last')}</Page>\n\t\t\t\t</ul>\n\t\t\t</nav>\n\t\t);\n\t},\n});\n\n\nconst Page = React.createClass({\n\trender() {\n\t\tconst props = this.props;\n\n\t\tif (props.isHidden) return null;\n\n\t\tconst baseCss = props.className ? `${props.className} ` : '';\n\t\tconst css = baseCss\n\t\t\t\t\t\t+ (props.isActive ? 'active' : '')\n\t\t\t\t\t\t+ (props.isDisabled ? ' disabled' : '');\n\n\t\treturn (\n\t\t\t<li key={this.props.index} className={css}>\n\t\t\t\t<a onClick={this.props.onClick}>{this.props.children}</a>\n\t\t\t</li>\n\t\t);\n\t},\n});\n\n\nfunction range(start, end) {\n\tconst res = [];\n\tfor (let i = start; i < end; i++) {\n\t\tres.push(i);\n\t}\n\n\treturn res;\n}\n\nexport default Pager;\n"]}