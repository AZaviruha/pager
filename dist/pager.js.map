{"version":3,"sources":["pager.jsx"],"names":["BASE_SHIFT","TITLE_SHIFT","TITLES","first","prev","prevSet","nextSet","next","last","Pager","props","handleFirstPage","bind","handlePreviousPage","handleNextPage","handleLastPage","handleMorePrevPages","handleMoreNextPages","handlePageChanged","key","titles","total","blockSize","visiblePages","current","blocks","Math","ceil","currBlock","size","calcBlocks","start","delta","end","isPrevDisabled","isNextDisabled","num","handler","onPageChanged","pair","range","map","idx","onClick","isActive","getTitles","isPrevMoreHidden","renderPages","visibleRange","isNextMoreHidden","Component","propTypes","PropTypes","number","isRequired","object","func","Page","isHidden","baseCss","className","css","isDisabled","index","children","boolean","string","res","i","push"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;;;AAGA,KAAMA,aAAc,CAApB;AACA,KAAMC,cAAc,CAApB;;AAEA,KAAMC,SAAS;AACdC,SAAS,OADK;AAEdC,QAAS,MAFK;AAGdC,WAAS,KAHK;AAIdC,WAAS,KAJK;AAKdC,QAAS,MALK;AAMdC,QAAS;AANK,EAAf;;AAUA;;;;KAGMC;;;AACL,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA,6GACZA,KADY;;AAGlB,SAAKC,eAAL,GAA2B,MAAKA,eAAL,CAAqBC,IAArB,OAA3B;AACA,SAAKC,kBAAL,GAA2B,MAAKA,kBAAL,CAAwBD,IAAxB,OAA3B;AACA,SAAKE,cAAL,GAA2B,MAAKA,cAAL,CAAoBF,IAApB,OAA3B;AACA,SAAKG,cAAL,GAA2B,MAAKA,cAAL,CAAoBH,IAApB,OAA3B;AACA,SAAKI,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBJ,IAAzB,OAA3B;AACA,SAAKK,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBL,IAAzB,OAA3B;AACA,SAAKM,iBAAL,GAA2B,MAAKA,iBAAL,CAAuBN,IAAvB,OAA3B;AATkB;AAUlB;;AAEE;;;;;6BACOO,KAAK;AACd,WAAO,CAAC,KAAKT,KAAL,CAAWU,MAAX,IAAqBlB,MAAtB,EAA8BiB,GAA9B,CAAP;AACA;;;gCAKY;AACZ,QAAMT,QAAQ,KAAKA,KAAnB;AACA,QAAMW,QAAQX,MAAMW,KAApB;AACA,QAAMC,YAAYZ,MAAMa,YAAxB;AACA,QAAMC,UAAUd,MAAMc,OAAN,GAAgBvB,WAAhC;AACA,QAAMwB,SAASC,KAAKC,IAAL,CAAUN,QAAQC,SAAlB,CAAf;AACA,QAAMM,YAAYF,KAAKC,IAAL,CAAUH,UAAUF,SAApB,IAAiCrB,WAAnD;;AAEA,WAAO;AACNoB,YAAUI,MADJ;AAEND,cAAUI,SAFJ;AAGNC,WAAUP;AAHJ,KAAP;AAKA;;;oCAEgB;AAChB,WAAO,KAAKZ,KAAL,CAAWc,OAAX,IAAsBxB,UAA7B;AACA;;;oCAEgB;AAChB,WAAO,KAAKU,KAAL,CAAWc,OAAX,IAAuB,KAAKd,KAAL,CAAWW,KAAX,GAAmBpB,WAAjD;AACA;;;sCAEkB;AAClB,QAAMwB,SAAS,KAAKK,UAAL,EAAf;AACA,WAAQL,OAAOJ,KAAP,KAAiBpB,WAAlB,IAAmCwB,OAAOD,OAAP,KAAmBxB,UAA7D;AACA;;;sCAEkB;AAClB,QAAMyB,SAAS,KAAKK,UAAL,EAAf;AACA,WAAQL,OAAOJ,KAAP,KAAiBpB,WAAlB,IAAmCwB,OAAOD,OAAP,KAAoBC,OAAOJ,KAAP,GAAepB,WAA7E;AACA;;;kCAEc;AACd,QAAMwB,SAAS,KAAKK,UAAL,EAAf;AACA,QAAMC,QAAQN,OAAOD,OAAP,GAAiBC,OAAOI,IAAtC;AACA,QAAMG,QAAQ,KAAKtB,KAAL,CAAWW,KAAX,GAAmBU,KAAjC;AACA,QAAME,MAAMF,SAAUC,QAAQP,OAAOI,IAAhB,GAAwBJ,OAAOI,IAA/B,GAAsCG,KAA/C,CAAZ;;AAEA,WAAO,CAACD,QAAQ9B,WAAT,EAAsBgC,MAAMhC,WAA5B,CAAP;AACA;;;qCAIiB;AACjB,QAAI,CAAC,KAAKiC,cAAL,EAAL,EAA4B;AAC3B,UAAKhB,iBAAL,CAAuBlB,UAAvB;AACA;AACD;;;wCAEoB;AACpB,QAAI,CAAC,KAAKkC,cAAL,EAAL,EAA4B;AAC3B,UAAKhB,iBAAL,CAAuB,KAAKR,KAAL,CAAWc,OAAX,GAAqBvB,WAA5C;AACA;AACD;;;oCAEgB;AAChB,QAAI,CAAC,KAAKkC,cAAL,EAAL,EAA4B;AAC3B,UAAKjB,iBAAL,CAAuB,KAAKR,KAAL,CAAWc,OAAX,GAAqBvB,WAA5C;AACA;AACD;;;oCAEgB;AAChB,QAAI,CAAC,KAAKkC,cAAL,EAAL,EAA4B;AAC3B,UAAKjB,iBAAL,CAAuB,KAAKR,KAAL,CAAWW,KAAX,GAAmBpB,WAA1C;AACA;AACD;;;yCAMqB;AACrB,QAAMwB,SAAS,KAAKK,UAAL,EAAf;AACA,SAAKZ,iBAAL,CAAwBO,OAAOD,OAAP,GAAiBC,OAAOI,IAAzB,GAAiC5B,WAAxD;AACA;;;yCAMqB;AACrB,QAAMwB,SAAS,KAAKK,UAAL,EAAf;AACA,SAAKZ,iBAAL,CAAuB,CAACO,OAAOD,OAAP,GAAiBvB,WAAlB,IAAiCwB,OAAOI,IAA/D;AACA;;;qCAEiBO,KAAK;AACtB,QAAMC,UAAU,KAAK3B,KAAL,CAAW4B,aAA3B;AACA,QAAID,OAAJ,EAAaA,QAAQD,GAAR;AACb;;;+BAUWG,MAAM;AAAA;;AACjB,WAAOC,MAAMD,KAAK,CAAL,CAAN,EAAeA,KAAK,CAAL,CAAf,EAAwBE,GAAxB,CAA4B,UAACL,GAAD,EAAMM,GAAN,EAAc;AAChD,SAAMlB,UAAUY,MAAMnC,WAAtB;AACA,SAAM0C,UAAU,OAAKzB,iBAAL,CAAuBN,IAAvB,SAAkCY,OAAlC,CAAhB;AACA,SAAMoB,WAAY,OAAKlC,KAAL,CAAWc,OAAX,KAAuBA,OAAzC;;AAEA,YACC;AAAC,UAAD;AAAA;AACC,YAAKkB,GADN;AAEC,cAAOA,GAFR,EAEa,UAAUE,QAFvB;AAGC,kBAAU,mBAHX;AAIC,gBAASD;AAJV;AAKEP;AALF,MADD;AAQA,KAbM,CAAP;AAcA;;;4BAGQ;AACR,QAAMhB,SAAS,KAAKyB,SAAL,CAAejC,IAAf,CAAoB,IAApB,CAAf;;AAEA,WACC;AAAA;AAAA;AACC;AAAA;AAAA,QAAI,WAAU,YAAd;AACC;AAAC,WAAD;AAAA;AACC,mBAAU,gBADX;AAEC,aAAI,gBAFL;AAGC,oBAAY,KAAKsB,cAAL,EAHb;AAIC,iBAAS,KAAKvB;AAJf;AAKES,cAAO,OAAP;AALF,OADD;AAQC;AAAC,WAAD;AAAA;AACC,mBAAU,eADX;AAEC,aAAI,eAFL;AAGC,oBAAY,KAAKc,cAAL,EAHb;AAIC,iBAAS,KAAKrB;AAJf;AAKEO,cAAO,MAAP;AALF,OARD;AAeC;AAAC,WAAD;AAAA;AACC,mBAAU,eADX;AAEC,aAAI,eAFL;AAGC,kBAAU,KAAK0B,gBAAL,EAHX;AAIC,iBAAS,KAAK9B;AAJf;AAKEI,cAAO,SAAP;AALF,OAfD;AAsBE,WAAK2B,WAAL,CAAiB,KAAKC,YAAL,EAAjB,CAtBF;AAwBC;AAAC,WAAD;AAAA;AACC,mBAAU,eADX;AAEC,aAAI,eAFL;AAGC,kBAAU,KAAKC,gBAAL,EAHX;AAIC,iBAAS,KAAKhC;AAJf;AAKEG,cAAO,SAAP;AALF,OAxBD;AA+BC;AAAC,WAAD;AAAA;AACC,mBAAU,eADX;AAEC,aAAI,eAFL;AAGC,oBAAY,KAAKe,cAAL,EAHb;AAIC,iBAAS,KAAKrB;AAJf;AAKEM,cAAO,MAAP;AALF,OA/BD;AAsCC;AAAC,WAAD;AAAA;AACC,mBAAU,eADX;AAEC,aAAI,eAFL;AAGC,oBAAY,KAAKe,cAAL,EAHb;AAIC,iBAAS,KAAKpB;AAJf;AAKEK,cAAO,MAAP;AALF;AAtCD;AADD,KADD;AAiDA;;;;GA9LkB,gBAAM8B;;AAiM1BzC,OAAM0C,SAAN,GAAkB;AACjB3B,WAAmB,gBAAM4B,SAAN,CAAgBC,MAAhB,CAAuBC,UADzB;AAEjBjC,SAAmB,gBAAM+B,SAAN,CAAgBC,MAAhB,CAAuBC,UAFzB;AAGjB/B,gBAAmB,gBAAM6B,SAAN,CAAgBC,MAAhB,CAAuBC,UAHzB;AAIjBlC,UAAmB,gBAAMgC,SAAN,CAAgBG,MAJlB;AAKjBjB,iBAAmB,gBAAMc,SAAN,CAAgBI;AALlB,EAAlB;;AASA,KAAMC,OAAO,SAAPA,IAAO,CAAC/C,KAAD,EAAW;AACvB,MAAIA,MAAMgD,QAAV,EAAoB,OAAO,IAAP;;AAEpB,MAAMC,UAAUjD,MAAMkD,SAAN,GAAqBlD,MAAMkD,SAA3B,SAA0C,EAA1D;AACA,MAAMC,MAAMF,WACLjD,MAAMkC,QAAN,GAAiB,QAAjB,GAA4B,EADvB,KAELlC,MAAMoD,UAAN,GAAmB,WAAnB,GAAiC,EAF5B,CAAZ;;AAIA,SACC;AAAA;AAAA,KAAI,KAAKpD,MAAMqD,KAAf,EAAsB,WAAWF,GAAjC;AACC;AAAA;AAAA,MAAG,SAASnD,MAAMiC,OAAlB;AAA4BjC,UAAMsD;AAAlC;AADD,GADD;AAKA,EAbD;;AAeAP,MAAKN,SAAL,GAAiB;AAChBO,YAAY,gBAAMN,SAAN,CAAgBa,OADZ;AAEhBrB,YAAY,gBAAMQ,SAAN,CAAgBa,OAFZ;AAGhBH,cAAY,gBAAMV,SAAN,CAAgBa,OAHZ;AAIhBL,aAAY,gBAAMR,SAAN,CAAgBc;AAJZ,EAAjB;;AAQA,UAAS1B,KAAT,CAAeT,KAAf,EAAsBE,GAAtB,EAA2B;AAC1B,MAAMkC,MAAM,EAAZ;AACA,OAAK,IAAIC,IAAIrC,KAAb,EAAoBqC,IAAInC,GAAxB,EAA6BmC,GAA7B,EAAkC;AACjCD,OAAIE,IAAJ,CAASD,CAAT;AACA;;AAED,SAAOD,GAAP;AACA;;mBAEc1D","file":"pager.js","sourcesContent":["/**\n * # Stateless Pager component\n *\n * ## Usage\n * ```\n * <Pager current={3}\n *        total={20}\n *        visiblePages={5}\n *        onPageChanged={this.handlePageChanged}\n *        titles={{\n *            first:   \"First\",\n *            prev:    \"Prev\",\n *            prevSet: \"<<<\",\n *            nextSet: \">>>\",\n *            next:    \"Next\",\n *            last:    \"Last\"\n *        }} />\n * ```\n *\n * ## How it looks like\n * ```\n * First | Prev | ... | 6 | 7 | 8 | 9 | ... | Next | Last\n * ```\n *\n */\n\nimport React from 'react';\n\n\n/**\n * ## Constants\n */\nconst BASE_SHIFT  = 0;\nconst TITLE_SHIFT = 1;\n\nconst TITLES = {\n\tfirst:   'First',\n\tprev:    '\\u00AB',\n\tprevSet: '...',\n\tnextSet: '...',\n\tnext:    '\\u00BB',\n\tlast:    'Last',\n};\n\n\n/**\n * ## Constructor\n */\nclass Pager extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleFirstPage     = this.handleFirstPage.bind(this);\n\t\tthis.handlePreviousPage  = this.handlePreviousPage.bind(this);\n\t\tthis.handleNextPage      = this.handleNextPage.bind(this);\n\t\tthis.handleLastPage      = this.handleLastPage.bind(this);\n\t\tthis.handleMorePrevPages = this.handleMorePrevPages.bind(this);\n\t\tthis.handleMoreNextPages = this.handleMoreNextPages.bind(this);\n\t\tthis.handlePageChanged   = this.handlePageChanged.bind(this);\n\t}\n\n    /* ========================= HELPERS ==============================*/\n\tgetTitles(key) {\n\t\treturn (this.props.titles || TITLES)[key];\n\t}\n\n    /**\n     * Calculates \"blocks\" of buttons with page numbers.\n     */\n\tcalcBlocks() {\n\t\tconst props = this.props;\n\t\tconst total = props.total;\n\t\tconst blockSize = props.visiblePages;\n\t\tconst current = props.current + TITLE_SHIFT;\n\t\tconst blocks = Math.ceil(total / blockSize);\n\t\tconst currBlock = Math.ceil(current / blockSize) - TITLE_SHIFT;\n\n\t\treturn {\n\t\t\ttotal:    blocks,\n\t\t\tcurrent:  currBlock,\n\t\t\tsize:     blockSize,\n\t\t};\n\t}\n\n\tisPrevDisabled() {\n\t\treturn this.props.current <= BASE_SHIFT;\n\t}\n\n\tisNextDisabled() {\n\t\treturn this.props.current >= (this.props.total - TITLE_SHIFT);\n\t}\n\n\tisPrevMoreHidden() {\n\t\tconst blocks = this.calcBlocks();\n\t\treturn (blocks.total === TITLE_SHIFT) || (blocks.current === BASE_SHIFT);\n\t}\n\n\tisNextMoreHidden() {\n\t\tconst blocks = this.calcBlocks();\n\t\treturn (blocks.total === TITLE_SHIFT) || (blocks.current === (blocks.total - TITLE_SHIFT));\n\t}\n\n\tvisibleRange() {\n\t\tconst blocks = this.calcBlocks();\n\t\tconst start = blocks.current * blocks.size;\n\t\tconst delta = this.props.total - start;\n\t\tconst end = start + ((delta > blocks.size) ? blocks.size : delta);\n\n\t\treturn [start + TITLE_SHIFT, end + TITLE_SHIFT];\n\t}\n\n\n    /* ========================= HANDLERS =============================*/\n\thandleFirstPage() {\n\t\tif (!this.isPrevDisabled()) {\n\t\t\tthis.handlePageChanged(BASE_SHIFT);\n\t\t}\n\t}\n\n\thandlePreviousPage() {\n\t\tif (!this.isPrevDisabled()) {\n\t\t\tthis.handlePageChanged(this.props.current - TITLE_SHIFT);\n\t\t}\n\t}\n\n\thandleNextPage() {\n\t\tif (!this.isNextDisabled()) {\n\t\t\tthis.handlePageChanged(this.props.current + TITLE_SHIFT);\n\t\t}\n\t}\n\n\thandleLastPage() {\n\t\tif (!this.isNextDisabled()) {\n\t\t\tthis.handlePageChanged(this.props.total - TITLE_SHIFT);\n\t\t}\n\t}\n\n    /**\n     * Chooses page, that is one before min of currently visible\n     * pages.\n     */\n\thandleMorePrevPages() {\n\t\tconst blocks = this.calcBlocks();\n\t\tthis.handlePageChanged((blocks.current * blocks.size) - TITLE_SHIFT);\n\t}\n\n    /**\n     * Chooses page, that is one after max of currently visible\n     * pages.\n     */\n\thandleMoreNextPages() {\n\t\tconst blocks = this.calcBlocks();\n\t\tthis.handlePageChanged((blocks.current + TITLE_SHIFT) * blocks.size);\n\t}\n\n\thandlePageChanged(num) {\n\t\tconst handler = this.props.onPageChanged;\n\t\tif (handler) handler(num);\n\t}\n\n\n    /* ========================= RENDERS ==============================*/\n    /**\n     * ### renderPages()\n     * Renders block of pages' buttons with numbers.\n     * @param {Number[]} range - pair of [start, from], `from` - not inclusive.\n     * @return {React.Element[]} - array of React nodes.\n     */\n\trenderPages(pair) {\n\t\treturn range(pair[0], pair[1]).map((num, idx) => {\n\t\t\tconst current = num - TITLE_SHIFT;\n\t\t\tconst onClick = this.handlePageChanged.bind(this, current);\n\t\t\tconst isActive = (this.props.current === current);\n\n\t\t\treturn (\n\t\t\t\t<Page\n\t\t\t\t\tkey={idx}\n\t\t\t\t\tindex={idx} isActive={isActive}\n\t\t\t\t\tclassName=\"btn-numbered-page\"\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t>{num}</Page>\n\t\t\t);\n\t\t});\n\t}\n\n\n\trender() {\n\t\tconst titles = this.getTitles.bind(this);\n\n\t\treturn (\n\t\t\t<nav>\n\t\t\t\t<ul className=\"pagination\">\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-first-page\"\n\t\t\t\t\t\tkey=\"btn-first-page\"\n\t\t\t\t\t\tisDisabled={this.isPrevDisabled()}\n\t\t\t\t\t\tonClick={this.handleFirstPage}\n\t\t\t\t\t>{titles('first')}</Page>\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-prev-page\"\n\t\t\t\t\t\tkey=\"btn-prev-page\"\n\t\t\t\t\t\tisDisabled={this.isPrevDisabled()}\n\t\t\t\t\t\tonClick={this.handlePreviousPage}\n\t\t\t\t\t>{titles('prev')}</Page>\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-prev-more\"\n\t\t\t\t\t\tkey=\"btn-prev-more\"\n\t\t\t\t\t\tisHidden={this.isPrevMoreHidden()}\n\t\t\t\t\t\tonClick={this.handleMorePrevPages}\n\t\t\t\t\t>{titles('prevSet')}</Page>\n\n\t\t\t\t\t{this.renderPages(this.visibleRange())}\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-next-more\"\n\t\t\t\t\t\tkey=\"btn-next-more\"\n\t\t\t\t\t\tisHidden={this.isNextMoreHidden()}\n\t\t\t\t\t\tonClick={this.handleMoreNextPages}\n\t\t\t\t\t>{titles('nextSet')}</Page>\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-next-page\"\n\t\t\t\t\t\tkey=\"btn-next-page\"\n\t\t\t\t\t\tisDisabled={this.isNextDisabled()}\n\t\t\t\t\t\tonClick={this.handleNextPage}\n\t\t\t\t\t>{titles('next')}</Page>\n\n\t\t\t\t\t<Page\n\t\t\t\t\t\tclassName=\"btn-last-page\"\n\t\t\t\t\t\tkey=\"btn-last-page\"\n\t\t\t\t\t\tisDisabled={this.isNextDisabled()}\n\t\t\t\t\t\tonClick={this.handleLastPage}\n\t\t\t\t\t>{titles('last')}</Page>\n\t\t\t\t</ul>\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nPager.propTypes = {\n\tcurrent:           React.PropTypes.number.isRequired,\n\ttotal:             React.PropTypes.number.isRequired,\n\tvisiblePages:      React.PropTypes.number.isRequired,\n\ttitles:            React.PropTypes.object,\n\tonPageChanged:     React.PropTypes.func,\n};\n\n\nconst Page = (props) => {\n\tif (props.isHidden) return null;\n\n\tconst baseCss = props.className ? `${props.className} ` : '';\n\tconst css = baseCss\n\t\t\t\t\t+ (props.isActive ? 'active' : '')\n\t\t\t\t\t+ (props.isDisabled ? ' disabled' : '');\n\n\treturn (\n\t\t<li key={props.index} className={css}>\n\t\t\t<a onClick={props.onClick}>{props.children}</a>\n\t\t</li>\n\t);\n};\n\nPage.propTypes = {\n\tisHidden:   React.PropTypes.boolean,\n\tisActive:   React.PropTypes.boolean,\n\tisDisabled: React.PropTypes.boolean,\n\tclassName:  React.PropTypes.string,\n};\n\n\nfunction range(start, end) {\n\tconst res = [];\n\tfor (let i = start; i < end; i++) {\n\t\tres.push(i);\n\t}\n\n\treturn res;\n}\n\nexport default Pager;\n"]}